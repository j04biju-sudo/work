<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Mariamma ‚ù§Ô∏è</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Arial,sans-serif;
  background:linear-gradient(135deg,#ffe6eb,#fff0f5);
  min-height:100vh;
  text-align:center;
  padding:24px;
  overflow-y:auto;
}
.page{max-width:760px;margin:0 auto}
.hidden{display:none}

/* page 1 */
.intro{
  font-size:16px;color:#666;margin-top:25vh;margin-bottom:14px;
  opacity:0;transform:translateY(10px);animation:fadeUp .8s ease forwards;
}
h1{
  font-size:clamp(28px,5vw,42px);
  margin-bottom:18px;line-height:1.3;
  opacity:0;transform:translateY(10px);
  animation:fadeUp .8s ease forwards;animation-delay:.15s;
}
.countdown,.timezone{
  font-size:15px;color:#888;margin-bottom:18px;
  opacity:0;transform:translateY(10px);
  animation:fadeUp .8s ease forwards;animation-delay:.3s;
}
@keyframes fadeUp{to{opacity:1;transform:translateY(0)}}
.heart{display:inline-block;animation:pulse 1.4s ease-in-out infinite}
@keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.15)}}
button{
  padding:16px 36px;font-size:18px;margin:10px;border:none;border-radius:16px;cursor:pointer;
}
#yes{background:#ff4d6d;color:#fff}
#no{background:#ccc;position:absolute}

/* page 2 */
#page2{padding-top:40px;padding-bottom:120px}
.final-message{
  font-size:clamp(18px,4vw,26px);
  line-height:1.7;color:#ff4d6d;
}
.line{opacity:0;transform:translateY(8px);animation:lineIn .7s ease forwards}
.line:nth-child(1){animation-delay:.3s}
.line:nth-child(2){animation-delay:1.1s}
.line:nth-child(3){animation-delay:1.9s}
.line:nth-child(4){animation-delay:2.7s}
.line:nth-child(5){animation-delay:3.5s}
.line:nth-child(6){animation-delay:4.3s}
@keyframes lineIn{to{opacity:1;transform:translateY(0)}}

/* photo */
.memory{
  margin:60px auto;max-width:90%;
  border-radius:20px;overflow:hidden;
  opacity:0;transform:translateY(20px);
  animation:fadeUp 1s ease forwards;animation-delay:5.5s;
}
.memory img{width:100%;display:block}

/* reply */
.reply{margin-top:50px}
.reply a{
  display:inline-block;padding:14px 30px;
  background:#ff4d6d;color:#fff;border-radius:30px;
  text-decoration:none;font-size:18px;
}

/* sound helper */
.sound-banner{
  position:fixed;
  left:50%;
  bottom:18px;
  transform:translateX(-50%);
  background:rgba(255,77,109,.92);
  color:#fff;
  padding:10px 14px;
  border-radius:999px;
  font-size:14px;
  display:none;
  z-index:9999;
}
.sound-banner button{
  margin-left:10px;
  padding:8px 12px;
  border-radius:999px;
  border:none;
  background:#fff;
  color:#ff4d6d;
  font-weight:600;
  cursor:pointer;
}
</style>
</head>

<body>

<div class="page" id="page1">
  <div class="intro">Mariamma, I‚Äôve been wanting to ask you something‚Ä¶</div>

  <h1>Will you be my Valentine? <span class="heart">‚ù§Ô∏è</span></h1>

  <div class="countdown" id="countdown"></div>
  <div class="timezone" id="timezone"></div>

  <button id="yes" onclick="startExperience()">Yes üíñ</button>
  <button id="no" onmouseover="moveNo()">No üôÉ</button>
</div>

<div class="page hidden" id="page2">
  <h1>Always You ‚ù§Ô∏è</h1>

  <div class="final-message">
    <div class="line">Muthe,</div><br>

    <div class="line">
      We met on 20 July 2024 when you came to the UK,
      and that moment changed everything for me.
    </div><br>

    <div class="line">
      On 7 October 2024, I asked you to be my girlfriend ‚Äî
      and on 14 February 2025, I flew to the US just to be with you.
    </div><br>

    <div class="line">
      This year, even though studies keep us apart,
      my heart is still right there with you.
    </div><br>

    <div class="line">
      Distance has never changed how I feel ‚Äî
      it only reminds me how real this is ‚ù§Ô∏è
    </div><br>

    <div class="line">
      I LOVE YOU, BABY ‚ù§Ô∏è<br>
      No matter where we are, you‚Äôre my Valentine.
    </div>
  </div>

  <div class="memory">
    <img src="memory.jpg" alt="Us ‚ù§Ô∏è">
  </div>

  <div class="reply">
    <a href="https://wa.me/447453046839?text=Always%20yes%20baby%20%E2%9D%A4%EF%B8%8F%20I%20love%20you" target="_blank">
      Tap to send me a ‚ù§Ô∏è
    </a>
  </div>
</div>

<div class="sound-banner" id="soundBanner">
  Sound is off on mobile
  <button onclick="forcePlay()">Tap to enable</button>
</div>

<audio id="music" loop preload="auto" playsinline>
  <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_3b1a03db6f.mp3" type="audio/mpeg">
</audio>

<script>
const music = document.getElementById("music");
const banner = document.getElementById("soundBanner");

let audioCtx;
let unlocked = false;

function unlockAudioOnce() {
  if (unlocked) return;
  try {
    audioCtx = audioCtx || new (window.AudioContext || window.webkitAudioContext)();
    if (audioCtx.state === "suspended") audioCtx.resume();
    // Create a silent buffer and play it to unlock iOS
    const buffer = audioCtx.createBuffer(1, 1, 22050);
    const source = audioCtx.createBufferSource();
    source.buffer = buffer;
    source.connect(audioCtx.destination);
    source.start(0);
    unlocked = true;
  } catch(e) {}
}

async function tryPlay() {
  unlockAudioOnce();
  music.volume = 0.15;
  try {
    await music.play();
    banner.style.display = "none";
    return true;
  } catch (e) {
    banner.style.display = "block";
    return false;
  }
}

function forcePlay() {
  // user explicitly taps ‚Äî this always counts as a gesture
  tryPlay();
}

function startExperience() {
  page1.classList.add("hidden");
  page2.classList.remove("hidden");

  // Attempt play immediately on the "Yes" click (gesture)
  tryPlay();

  // Cinematic auto-scroll after text/photo appear
  setTimeout(() => {
    window.scrollTo({ top: document.body.scrollHeight, behavior: "smooth" });
  }, 6500);
}

function moveNo() {
  no.style.top = Math.random()*80 + "vh";
  no.style.left = Math.random()*80 + "vw";
}

// Also unlock on ANY first touch/click anywhere (extra safety)
window.addEventListener("touchstart", () => { unlockAudioOnce(); }, { once: true, passive: true });
window.addEventListener("click", () => { unlockAudioOnce(); }, { once: true });

function updateCountdown() {
  const v = new Date(new Date().getFullYear(), 1, 14);
  const n = new Date();
  if (n > v) v.setFullYear(v.getFullYear() + 1);

  const diff = v - n;
  const d = Math.floor(diff / 86400000);
  const h = Math.floor((diff / 3600000) % 24);
  const m = Math.floor((diff / 60000) % 60);

  countdown.textContent = `Valentine‚Äôs Day in ${d}d ${h}h ${m}m`;
}

function updateTimezone() {
  timezone.textContent = "";
}

updateCountdown();
updateTimezone();
setInterval(updateCountdown, 60000);
</script>

</body>
</html>
